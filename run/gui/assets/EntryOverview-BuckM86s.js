import{r as o,j as e,af as g,b8 as v,ag as E,ah as j,o as w,ay as z}from"./material-react-table-Clsq1WEk.js";import{u as _,b as f,d as R,e as S,L,G as M,l as U,a as C,f as P,E as T}from"./index-ByzPaSZm.js";import{c as B,a as D}from"./utils-CQNMJ0kl.js";import{E as k,e as F}from"./EntryDataEditor-COyJzOg7.js";import{E as I}from"./ErrorBoundary-DVJerO_f.js";import{u as b,P as N,E as A,a as G,b as Y,c as V,d as W}from"./EntrySection-CDujCcga.js";import{u as q}from"./EntryContext-DBKD7XKl.js";import"./@mapbox/rehype-prism-vXukC30A.js";import"./msw-BcASioFF.js";import"./react-pdf-CnhbYwCo.js";import"./plotly.js-dist-min-EtOYGmgt.js";import"./HDF5FileViewer-DGgWyl_8.js";import"./SectionProvider-BGIb-Rry.js";import"./List-C_hbwj_D.js";import"./Boolean-jjDVkWzX.js";import"./Download-CO8lh_9E.js";import"./tslib.es6-I3t2aBBq.js";function H(a){const{url:d}=_(),{isPage:s}=f(),{canWrite:n}=b(),{index:t}=q(),[l,p]=o.useState("Default"),c=u=>{p(u.target.value)},i=n&&s,y=d({path:`/uploads/${t.upload_id}/files/${t.mainfile}`}),r=[e.jsxs(g,{size:"small",sx:{m:1,minWidth:120},children:[e.jsx(v,{id:"select-layout-label",children:"Layout"}),e.jsx(E,{labelId:"select-layout-label",id:"demo-simple-select-helper",value:l,label:"Layout",onChange:c,children:e.jsx(j,{value:"Default",children:"Default"})})]},"layout")];return i&&(r.push(e.jsx(N,{})),r.push(e.jsx(A,{})),r.push(e.jsx(G,{})),r.push(e.jsx(Y,{}))),r.push(e.jsx(w,{variant:"contained",component:L,to:y,endIcon:e.jsx(M,{}),children:"Go to File"},"file")),e.jsx(R,{title:e.jsx(S,{title:"Entry overview",sx:{mt:0,mb:0}}),secondaryActions:r,...a})}const O={type:"container",children:[{type:"condition",query:{"quantities:any":["results.properties.catalytic"]},children:[{type:"container",sm:5,sx:{height:"650px"},title:"Catalytic reaction",children:[{type:"quantity",property:"data/name",editable:!1,sm:12},{type:"quantity",property:"data/reaction_name",editable:!1,sm:12},{type:"quantity",property:"data/reaction_type",editable:!1,sm:12}]}]},{type:"condition",query:{"quantities:any":["results.material.topology"]},children:[{type:"material",title:"Material",md:7,sx:{height:"650px"}}]},{type:"condition",query:{"sections:any":["pynxtools.nomad.schema.Root"]},children:[{type:"container",title:"Material",md:6,children:[{type:"quantity",property:"results/material/chemical_formula_iupac",editable:!1,md:6},{type:"quantity",property:"results/material/chemical_formula_reduced",editable:!1,md:6},{type:"quantity",property:"results/material/chemical_formula_hill",editable:!1,md:6},{type:"quantity",property:"results/material/chemical_formula_descriptive",editable:!1,md:6},{type:"quantity",property:"results/material/elements",editable:!1,direction:"horizontal",md:6},{type:"quantity",property:"results/material/n_elements",editable:!1,md:6}]},{type:"container",title:"NeXus Entry",md:6,children:[{type:"quantity",property:"data/ENTRY/0/definition__field",editable:!1,md:6},{type:"quantity",property:"data/ENTRY/0/definition___version",editable:!1,md:6},{type:"quantity",property:"data/ENTRY/0/title__field",editable:!1,md:12},{type:"quantity",property:"data/ENTRY/0/start_time__field",editable:!1,md:6},{type:"quantity",property:"data/ENTRY/0/end_time__field",editable:!1,md:6}]},{type:"hdf5",property:"metadata/mainfile",title:"NeXus HDF5",md:12,sx:{height:"700px"}}]},{type:"condition",query:{"sections:any":["nomad.datamodel.results.SolarCell"]},children:[{type:"plot",title:"Device structure",property:"data/figures",md:5,sx:{height:"650px"}}]},{type:"condition",query:{"quantities:any":["results.method.simulation"]},children:[{type:"container",title:"Method",md:5,sx:{height:"650px"},children:[{type:"quantity",property:"results/method/simulation/program_name",editable:!1},{type:"quantity",property:"results/method/simulation/program_version",editable:!1},{type:"quantity",property:"results/method/simulation/dft/basis_set_type",editable:!1},{type:"quantity",property:"results/method/simulation/dft/core_electron_treatment",editable:!1},{type:"quantity",property:"results/method/simulation/dft/jacobs_ladder",editable:!1},{type:"quantity",property:"results/method/simulation/dft/xc_functional_names",editable:!1,direction:"horizontal"}]}]},{type:"condition",query:{"sections:any":["nomad.datamodel.results.SolarCell"]},children:[{type:"container",title:"Solar cell properties",sx:{height:"330px"},children:[{type:"quantity",property:"results/properties/optoelectronic/solar_cell/efficiency",editable:!1,sm:3},{type:"quantity",property:"results/properties/optoelectronic/solar_cell/fill_factor",editable:!1,sm:3},{type:"quantity",property:"results/properties/optoelectronic/solar_cell/open_circuit_voltage",editable:!1,sm:3},{type:"quantity",property:"results/properties/optoelectronic/solar_cell/short_circuit_current_density",editable:!1,sm:3},{type:"quantity",property:"results/properties/optoelectronic/solar_cell/illumination_intensity",editable:!1,sm:3},{type:"quantity",property:"results/properties/optoelectronic/solar_cell/device_area",editable:!1,sm:3},{type:"quantity",property:"results/properties/optoelectronic/solar_cell/device_architecture",editable:!1,sm:6},{type:"quantity",property:"results/properties/optoelectronic/solar_cell/absorber",editable:!1,sm:6},{type:"quantity",property:"results/properties/optoelectronic/solar_cell/absorber_fabrication",editable:!1,sm:6},{type:"quantity",property:"results/properties/optoelectronic/solar_cell/device_stack",editable:!1,sm:12}]}]},{type:"condition",query:{"quantities:any":["results.properties.electronic.band_structure_electronic.segment","results.properties.electronic.dos_electronic","results.properties.electronic.dos_electronic_new","results.properties.electronic.band_gap"]},children:[{type:"container",title:"Electronic properties",children:[{type:"condition",query:{"quantities:any":["results.properties.electronic.band_structure_electronic.segment"]},children:[{type:"band_structure_electronic",title:"Band structure",md:12,lg:6,xl:6,sx:{height:"450px"}}]},{type:"condition",query:{"quantities:any":["results.properties.electronic.band_structure_electronic.segment"]},children:[{type:"brillouin_zone_electronic",title:"Brillouin zone",md:12,lg:6,xl:3,sx:{height:"450px"}}]},{type:"condition",query:{"quantities:any":["results.properties.electronic.dos_electronic","results.properties.electronic.dos_electronic_new"]},children:[{type:"dos_electronic",title:"Density of states",md:12,lg:6,xl:3,sx:{height:"450px"}}]},{type:"condition",query:{"quantities:any":["results.properties.electronic.band_gap"]},children:[{type:"table",title:"Band gap",property:"results/properties/electronic/band_gap",editable:!1,columns:[{label:"Channel",type:"quantity",property:"index"},{type:"quantity",property:"type"},{type:"quantity",property:"value",displayUnit:"eV"},{label:"Label",type:"quantity",property:"provenance/label"}],md:"grow",sx:{height:"348px"}}]}]}]},{type:"condition",query:{"quantities:any":["results.properties.vibrational.band_structure_phonon","results.properties.vibrational.dos_phonon","results.properties.vibrational.heat_capacity_constant_volume","results.properties.vibrational.energy_free_helmholtz"]},children:[{type:"container",title:"Vibrational properties",md:12,children:[{type:"condition",query:{"quantities:any":["results.properties.vibrational.band_structure_phonon"]},children:[{type:"band_structure_vibrational",title:"Phonon Band structure",md:12,lg:6,xl:6,sx:{height:"450px"}}]},{type:"condition",query:{"quantities:any":["results.properties.vibrational.band_structure_phonon.reciprocal_cell"]},children:[{type:"brillouin_zone_vibrational",title:"Brillouin zone",md:12,lg:6,xl:3,sx:{height:"450px"}}]},{type:"condition",query:{"quantities:any":["results.properties.vibrational.dos_phonon"]},children:[{type:"dos_vibrational",title:"Phonon Density of States",md:12,lg:6,xl:3,sx:{height:"450px"}}]},{type:"condition",query:{"quantities:any":["results.properties.vibrational.heat_capacity_constant_volume"]},children:[{type:"heat_capacity",title:"Heat Capacity at Constant Volume",md:12,lg:6,xl:6,sx:{height:"450px"}}]},{type:"condition",query:{"quantities:any":["results.properties.vibrational.energy_free_helmholtz"]},children:[{type:"helmholtz_free_energy",title:"Helmholtz Free Energy",md:12,lg:6,xl:6,sx:{height:"450px"}}]}]}]},{type:"condition",query:{"quantities:any":["results.properties.geometry_optimization.energies"]},children:[{type:"container",title:"Geometry Optimization",children:[{type:"geometry_optimization",title:"Energy convergence",sx:{height:"500px"}},{type:"container",title:"Convergence results",children:[{type:"quantity",property:"results/properties/geometry_optimization/final_energy_difference",sm:4,displayUnit:"eV",editable:!1},{type:"quantity",property:"results/properties/geometry_optimization/final_displacement_maximum",sm:4,displayUnit:"angstrom",editable:!1},{type:"quantity",property:"results/properties/geometry_optimization/final_force_maximum",sm:4,displayUnit:"a_u_force",editable:!1}]}]}]},{type:"condition",query:{"quantities:any":["results.properties.thermodynamic.trajectory"]},children:[{type:"container",title:"Thermodynamic properties",children:[{type:"trajectories",title:"Trajectory",sx:{height:"600px"}},{type:"container",title:"Molecular dynamics",children:[{type:"quantity",property:"results/properties/thermodynamic/trajectory/0/provenance/molecular_dynamics/time_step",sm:4,displayUnit:"fs",editable:!1},{type:"quantity",property:"results/properties/thermodynamic/trajectory/0/provenance/molecular_dynamics/ensemble_type",sm:4,editable:!1}]}]}]},{type:"condition",query:{"quantities:any":["results.properties.mechanical.energy_volume_curve","results.properties.mechanical.bulk_modulus","results.properties.mechanical.shear_modulus"]},children:[{type:"container",title:"Mechanical properties",children:[{type:"energy_volume_curve",title:"Energy volume curve",lg:12,sx:{height:"610px"}},{type:"condition",query:{"quantities:any":["results.properties.mechanical.bulk_modulus"]},children:[{type:"table",title:"Bulk modulus",property:"results/properties/mechanical/bulk_modulus",editable:!1,columns:[{type:"quantity",property:"type"},{type:"quantity",property:"value",displayUnit:"GPa"}],md:12,lg:"grow",sx:{height:"610px"}}]},{type:"condition",query:{"quantities:any":["results.properties.mechanical.shear_modulus"]},children:[{type:"table",title:"Shear modulus",property:"results/properties/mechanical/shear_modulus",editable:!1,columns:[{type:"quantity",property:"type"},{type:"quantity",property:"value",displayUnit:"GPa"}],md:12,lg:"grow",sx:{height:"610px"}}]}]}]},{type:"condition",query:{"quantities:any":["workflow2"]},children:[{type:"container",title:"Workflow",children:[{type:"workflow",md:12,sx:{height:"600px"}}]}]}]};function X({layout:a,editable:d}){const s=C(),{fullMatch:n}=_(),t=P(),[l,p]=o.useState(),c=o.useState(!0)[1],i=n[n.length-2].params.entryId,y=o.useMemo(()=>{const u={entries:{[i]:{archive:{}}}};return a&&D(a,u.entries[i].archive),u},[a,i]),r=o.useRef(!0);return r.current=!t.hasRequestBeenMade(y.entries[i].archive),o.useEffect(()=>{async function u(){if(s)try{const m=y.entries[i].archive;c(!0);const h=await s.graph(y),x=(h.entries?.[i]).archive;t.startUpdate(m),t.commitUpdate(x,h)}catch(m){p(m),t.abortUpdate()}finally{c(!1),r.current=!1}}r.current&&u()},[t,y,i,s,c]),e.jsx(I,{children:l?e.jsx(T,{error:l}):e.jsx(k,{layout:F(a,d),loading:r.current})})}function ue(){const{canWrite:a}=b(),{preview:d}=V(),{isPage:s,isSelect:n}=f(),t=a&&s&&!d,{index:l}=q(),p=o.useMemo(()=>B(U.cloneDeep(O),l),[l]),c=o.useMemo(()=>e.jsxs(e.Fragment,{children:[p?.children?.length===0?e.jsx(z,{severity:"info",children:"An overview for this entry could not be automatically created."}):e.jsx(X,{layout:p,editable:t}),n&&e.jsx(W,{})]}),[t,n,p]);return e.jsxs(e.Fragment,{children:[s&&e.jsx(H,{}),c]})}export{ue as default};
